{% liquid
  assign section_padding_top = section.settings.padding_top | default: 80
  assign section_padding_bottom = section.settings.padding_bottom | default: 80
  assign text_alignment = section.settings.text_alignment | default: 'left'
  assign left_image = section.settings.image
  assign use_lottie_checks = section.settings.use_lottie_checks
  assign lottie_src = section.settings.lottie_src
  assign lottie_size = section.settings.lottie_size | default: 32
  if use_lottie_checks and lottie_src == blank
    assign use_lottie_checks = false
  endif
  assign image_alt_text = section.settings.image_alt
  if image_alt_text == blank and left_image != blank
    assign image_alt_text = left_image.alt
  endif
  if image_alt_text == blank
    assign image_alt_text = 'Feature compare image'
  endif
%}

<section
  id="feature-compare-ovolite-{{ section.id }}"
  class="feature-compare-ovolite"
  data-align="{{ text_alignment }}"
>
  {% if use_lottie_checks %}
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.5/dist/dotlottie-wc.js" type="module"></script>
  {% endif %}
  <style>
    #feature-compare-ovolite-{{ section.id }} {
      --fc-heading-color: {{ section.settings.heading_color | default: '#618049' }};
      --fc-subheading-color: {{ section.settings.subheading_color | default: '#32512D' }};
      --fc-body-color: {{ section.settings.body_color | default: 'rgba(50, 81, 45, 0.72)' }};
      --fc-bg-color: {{ section.settings.background_color | default: '#F5F7EC' }};
      --fc-border-color: {{ section.settings.row_border_color | default: 'rgba(98, 128, 73, 0.28)' }};
      --fc-header-color: {{ section.settings.header_color | default: 'rgba(50, 81, 45, 0.7)' }};
      --fc-check-bg: {{ section.settings.check_background | default: 'rgba(193, 217, 170, 0.35)' }};
      --fc-check-color: {{ section.settings.check_color | default: '#3F6B3B' }};
      --fc-cross-color: {{ section.settings.cross_color | default: 'rgba(50, 81, 45, 0.55)' }};
      padding-top: {{ section_padding_top | append: 'px' }};
      padding-bottom: {{ section_padding_bottom | append: 'px' }};
      background-color: var(--fc-bg-color);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__inner {
      width: 100%;
      {% if section.settings.enable_max_width %}
        max-width: {{ section.settings.max_width | default: 1400 }}px;
        margin-inline: auto;
      {% else %}
        max-width: none;
        margin-inline: 0;
      {% endif %}
      display: grid;
      grid-template-columns: minmax(0, 0.4fr) minmax(0, 0.6fr);
      gap: clamp(32px, 5vw, 72px);
      align-items: stretch;
      padding-inline: clamp(0px, 4vw, 48px);
    }

    @media screen and (max-width: 1023px) {
      #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__inner {
        grid-template-columns: 1fr;
      }
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__media {
      position: relative;
      min-height: clamp(320px, 60vh, 560px);
      overflow: hidden;
      border-radius: {{ section.settings.media_border_radius | default: 0 }}px;
      background-color: {{ section.settings.image_fallback_color | default: '#E6EDDA' }};
      display: flex;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__media--placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: clamp(24px, 4vw, 36px);
      text-align: {{ text_alignment }};
    }

    @media screen and (max-width: 639px) {
      #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__content {
        text-align: {{ section.settings.text_alignment_mobile | default: 'center' }};
      }
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__heading {
      margin: 0;
      color: var(--fc-heading-color);
      font-size: clamp(42px, 5vw, 68px);
      line-height: 0.95;
      font-weight: 700;
      letter-spacing: -0.015em;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__subheading {
      margin: 0;
      color: var(--fc-subheading-color);
      font-size: clamp(24px, 3.5vw, 36px);
      font-weight: 600;
      line-height: 1.1;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__description {
      color: var(--fc-body-color);
      font-size: clamp(16px, 2vw, 18px);
      line-height: 1.55;
      max-width: {{ section.settings.content_max_width | default: 620 }}px;
      margin: 0;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__table {
      display: flex;
      flex-direction: column;
      gap: 0;
      border-top: 1px solid var(--fc-border-color);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__row {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) repeat(2, minmax(0, 0.6fr));
      align-items: stretch;
      padding-block: clamp(16px, 2.3vw, 28px);
      border-bottom: 1px solid var(--fc-border-color);
      gap: clamp(12px, 3vw, 28px);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__row--header {
      font-size: 13px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--fc-header-color);
      font-weight: 600;
      padding-block: clamp(12px, 2vw, 20px);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__cell {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 14px;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__cell--header {
      justify-content: flex-start;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__cell--indicator {
      justify-content: center;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__benefit {
      color: var(--fc-body-color);
      font-size: clamp(17px, 2.4vw, 20px);
      font-weight: 500;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__pill {
      width: clamp(42px, 4vw, 56px);
      height: clamp(32px, 3vw, 42px);
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: transparent;
      transition: background-color 0.3s ease;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__cell--check .feature-compare-ovolite__pill {
      background-color: var(--fc-check-bg);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__icon {
      width: clamp(18px, 2vw, 22px);
      height: clamp(18px, 2vw, 22px);
      display: inline-flex;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__icon--check path {
      stroke: var(--fc-check-color);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__icon--cross path {
      stroke: var(--fc-cross-color);
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__label {
      color: var(--fc-body-color);
      font-size: clamp(15px, 2vw, 16px);
      font-weight: 500;
      text-align: center;
    }

    @media screen and (max-width: 639px) {
      #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__row {
        grid-template-columns: minmax(0, 1fr) repeat(2, minmax(0, 0.4fr));
        gap: 12px;
      }

      #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__label {
        font-size: 14px;
      }
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__row--header .feature-compare-ovolite__cell {
      justify-content: center;
    }

    #feature-compare-ovolite-{{ section.id }} .feature-compare-ovolite__row--header .feature-compare-ovolite__cell:first-child {
      justify-content: flex-start;
    }

    #feature-compare-ovolite-{{ section.id }} .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>

  <div class="feature-compare-ovolite__inner">
    <div class="feature-compare-ovolite__media{% unless left_image %} feature-compare-ovolite__media--placeholder{% endunless %}">
      {% if left_image != blank %}
        {{
          left_image
          | image_url: width: 2000
          | image_tag: class: 'feature-compare-ovolite__image', loading: 'lazy', sizes: '(min-width: 1024px) 40vw, 100vw', alt: image_alt_text
        }}
      {% else %}
        <span>No image selected</span>
      {% endif %}
    </div>
    <div class="feature-compare-ovolite__content">
      {% if section.settings.subheading != blank %}
        <p class="feature-compare-ovolite__subheading">{{ section.settings.subheading }}</p>
      {% endif %}
      {% if section.settings.heading != blank %}
        <h2 class="feature-compare-ovolite__heading">{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.description != blank %}
        <div class="feature-compare-ovolite__description rte">
          {{ section.settings.description }}
        </div>
      {% endif %}

      <div class="feature-compare-ovolite__table" role="table">
        <div class="feature-compare-ovolite__row feature-compare-ovolite__row--header" role="row">
          <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--header" role="columnheader">
            {{ section.settings.benefit_heading | default: 'Benefits' }}
          </div>
          <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator" role="columnheader">
            <span class="feature-compare-ovolite__label">{{ section.settings.left_label | default: 'More' }}</span>
          </div>
          <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator" role="columnheader">
            <span class="feature-compare-ovolite__label">{{ section.settings.right_label | default: 'Regular Matcha' }}</span>
          </div>
        </div>

        {% if section.blocks.size > 0 %}
          {% for block in section.blocks %}
            <div class="feature-compare-ovolite__row" role="row" {{ block.shopify_attributes }}>
              <div class="feature-compare-ovolite__cell" role="cell">
                <span class="feature-compare-ovolite__benefit">{{ block.settings.benefit | escape }}</span>
              </div>
              <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator feature-compare-ovolite__cell--{{ block.settings.left_state }}" role="cell">
                <span class="feature-compare-ovolite__pill" aria-hidden="true">
                  {% if block.settings.left_state == 'check' %}
                    <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--check">
                      {% if use_lottie_checks %}
                        <dotlottie-wc
                          src="{{ lottie_src }}"
                          style="width: {{ lottie_size }}px; height: {{ lottie_size }}px;"
                          autoplay
                          loop
                          aria-hidden="true"
                        ></dotlottie-wc>
                      {% else %}
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M5.5 12.5L10 17l8.5-8.5" stroke="{{ section.settings.check_color | default: '#3F6B3B' }}" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      {% endif %}
                    </span>
                  {% else %}
                    <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--cross">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 7l10 10m0-10L7 17" stroke-width="2.2" stroke-linecap="round"/>
                      </svg>
                    </span>
                  {% endif %}
                </span>
                <span class="visually-hidden">
                  {{ section.settings.left_label | default: 'More' }} {% if block.settings.left_state == 'check' %}includes{% else %}does not include{% endif %} {{ block.settings.benefit }}
                </span>
              </div>
              <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator feature-compare-ovolite__cell--{{ block.settings.right_state }}" role="cell">
                <span class="feature-compare-ovolite__pill" aria-hidden="true">
                  {% if block.settings.right_state == 'check' %}
                    <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--check">
                      {% if use_lottie_checks %}
                        <dotlottie-wc
                          src="{{ lottie_src }}"
                          style="width: {{ lottie_size }}px; height: {{ lottie_size }}px;"
                          autoplay
                          loop
                          aria-hidden="true"
                        ></dotlottie-wc>
                      {% else %}
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M5.5 12.5L10 17l8.5-8.5" stroke="{{ section.settings.check_color | default: '#3F6B3B' }}" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      {% endif %}
                    </span>
                  {% else %}
                    <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--cross">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 7l10 10m0-10L7 17" stroke-width="2.2" stroke-linecap="round"/>
                      </svg>
                    </span>
                  {% endif %}
                </span>
                <span class="visually-hidden">
                  {{ section.settings.right_label | default: 'Regular Matcha' }} {% if block.settings.right_state == 'check' %}includes{% else %}does not include{% endif %} {{ block.settings.benefit }}
                </span>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="feature-compare-ovolite__row" role="row">
            <div class="feature-compare-ovolite__cell" role="cell">
              <span class="feature-compare-ovolite__benefit">Add benefits in the section settings.</span>
            </div>
            <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator feature-compare-ovolite__cell--check" role="cell">
              <span class="feature-compare-ovolite__pill" aria-hidden="true">
                <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--check">
                  {% if use_lottie_checks %}
                    <dotlottie-wc
                      src="{{ lottie_src }}"
                      style="width: {{ lottie_size }}px; height: {{ lottie_size }}px;"
                      autoplay
                      loop
                      aria-hidden="true"
                    ></dotlottie-wc>
                  {% else %}
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5.5 12.5L10 17l8.5-8.5" stroke="{{ section.settings.check_color | default: '#3F6B3B' }}" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  {% endif %}
                </span>
              </span>
            </div>
            <div class="feature-compare-ovolite__cell feature-compare-ovolite__cell--indicator feature-compare-ovolite__cell--cross" role="cell">
              <span class="feature-compare-ovolite__pill" aria-hidden="true">
                <span class="feature-compare-ovolite__icon feature-compare-ovolite__icon--cross">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 7l10 10m0-10L7 17" stroke-width="2.2" stroke-linecap="round"/>
                  </svg>
                </span>
              </span>
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Feature Compare Ovolite",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Left image"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image alt text",
      "default": "Matcha scoop"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "More for you."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "See the difference."
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Highlight your product benefits and show how it outperforms the competition.</p>"
    },
    {
      "type": "text",
      "id": "benefit_heading",
      "label": "Benefits column heading",
      "default": "Benefits"
    },
    {
      "type": "text",
      "id": "left_label",
      "label": "Left column label",
      "default": "More"
    },
    {
      "type": "text",
      "id": "right_label",
      "label": "Right column label",
      "default": "Regular Matcha"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment (desktop)",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "select",
      "id": "text_alignment_mobile",
      "label": "Text alignment (mobile)",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 180,
      "step": 4,
      "unit": "px",
      "default": 96
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 180,
      "step": 4,
      "unit": "px",
      "default": 96
    },
    {
      "type": "checkbox",
      "id": "enable_max_width",
      "label": "Limit content width on large screens",
      "default": false
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Content max width",
      "min": 960,
      "max": 1440,
      "step": 20,
      "unit": "px",
      "default": 1180
    },
    {
      "type": "range",
      "id": "content_max_width",
      "label": "Body text max width",
      "min": 360,
      "max": 760,
      "step": 20,
      "unit": "px",
      "default": 600
    },
    {
      "type": "range",
      "id": "media_border_radius",
      "label": "Image corner radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#F5F7EC"
    },
    {
      "type": "color",
      "id": "image_fallback_color",
      "label": "Image placeholder color",
      "default": "#DDE8C9"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#618049"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#618049"
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body text color",
      "default": "rgba(50, 81, 45, 0.72)"
    },
    {
      "type": "color",
      "id": "header_color",
      "label": "Table header color",
      "default": "rgba(50, 81, 45, 0.7)"
    },
    {
      "type": "color",
      "id": "row_border_color",
      "label": "Row divider color",
      "default": "rgba(98, 128, 73, 0.28)"
    },
    {
      "type": "color",
      "id": "check_background",
      "label": "Check background color",
      "default": "rgba(193, 217, 170, 0.35)"
    },
    {
      "type": "color",
      "id": "check_color",
      "label": "Check icon color",
      "default": "#3F6B3B"
    },
    {
      "type": "color",
      "id": "cross_color",
      "label": "Cross icon color",
      "default": "rgba(50, 81, 45, 0.55)"
    },
    {
      "type": "checkbox",
      "id": "use_lottie_checks",
      "label": "Animate check icon with Lottie",
      "default": false
    },
    {
      "type": "url",
      "id": "lottie_src",
      "label": "Lottie file URL",
      "info": "Paste a .json or .lottie animation URL for the check icon."
    },
    {
      "type": "range",
      "id": "lottie_size",
      "label": "Lottie icon size",
      "min": 16,
      "max": 64,
      "step": 2,
      "unit": "px",
      "default": 28
    }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Benefit item",
      "settings": [
        {
          "type": "text",
          "id": "benefit",
          "label": "Benefit",
          "default": "Low in carbs"
        },
        {
          "type": "select",
          "id": "left_state",
          "label": "Left column icon",
          "default": "check",
          "options": [
            { "value": "check", "label": "Check" },
            { "value": "cross", "label": "Cross" }
          ]
        },
        {
          "type": "select",
          "id": "right_state",
          "label": "Right column icon",
          "default": "cross",
          "options": [
            { "value": "check", "label": "Check" },
            { "value": "cross", "label": "Cross" }
          ]
        }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Feature Compare Ovolite",
      "category": "Product",
      "blocks": [
        {
          "type": "row",
          "settings": {
            "benefit": "Low in carbs",
            "left_state": "check",
            "right_state": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "benefit": "Low in sugar",
            "left_state": "check",
            "right_state": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "benefit": "High in protein",
            "left_state": "check",
            "right_state": "cross"
          }
        }
      ]
    }
  ]
}
{% endschema %}

