{% liquid
  assign bg_color = section.settings.bg_color | default: '#f6f4ea'
  assign accent_color = section.settings.accent_color | default: '#f3bd2f'
  assign heading_color = section.settings.heading_color | default: '#0d0d0d'
  assign subheading_color = section.settings.subheading_color | default: '#2c2c2c'
  assign note_color = section.settings.note_color | default: '#2f6a3e'
  assign card_bg = section.settings.card_bg | default: 'rgba(255,255,255,0)'
  assign section_padding_y = section.settings.section_padding_y | default: 80
  assign gap_between_rows = section.settings.row_gap | default: 72
%}

<section
  id="energy-payment-{{ section.id }}"
  class="energy-payment-spotlight"
  style="--ep-bg: {{ bg_color }};
         --ep-accent: {{ accent_color }};
         --ep-heading: {{ heading_color }};
         --ep-subheading: {{ subheading_color }};
         --ep-note: {{ note_color }};
         --ep-card-bg: {{ card_bg }};
         --ep-padding-y: {{ section_padding_y }}px;
         --ep-row-gap: {{ gap_between_rows }}px;"
>
  <div class="ep-wrapper">
    <div class="ep-top">
      <div class="ep-energy">
        {% if section.settings.energy_icon != blank %}
          <div class="ep-energy-icon">
            {{ section.settings.energy_icon | image_url: width: 140 | image_tag: class: 'ep-energy-icon__image', alt: section.settings.energy_heading | escape }}
          </div>
        {% endif %}
        {% if section.settings.energy_heading != blank %}
          <p class="ep-energy__label">{{ section.settings.energy_heading }}</p>
        {% endif %}
        <div class="ep-energy__metrics">
          <div class="ep-energy__metric ep-energy__metric--primary" style="--ep-value-size: {{ section.settings.energy_primary_value_size | default: 64 }}px; --ep-unit-size: {{ section.settings.energy_primary_unit_size | default: 28 }}px">
            {% if section.settings.energy_primary_value != blank %}
              <span class="ep-energy__metric-number">{{ section.settings.energy_primary_value }}</span>
            {% endif %}
            {% if section.settings.energy_primary_unit != blank %}
              <span class="ep-energy__metric-unit ep-energy__metric-unit--primary">{{ section.settings.energy_primary_unit }}</span>
            {% endif %}
          </div>
          <span class="ep-energy__metrics-dot">•</span>
          <div class="ep-energy__metric ep-energy__metric--secondary" style="--ep-value-size: {{ section.settings.energy_secondary_value_size | default: 64 }}px; --ep-unit-size: {{ section.settings.energy_secondary_unit_size | default: 28 }}px">
            {% if section.settings.energy_secondary_value != blank %}
              <span class="ep-energy__metric-number">{{ section.settings.energy_secondary_value }}</span>
            {% endif %}
            {% if section.settings.energy_secondary_unit != blank %}
              <span class="ep-energy__metric-unit ep-energy__metric-unit--secondary">{{ section.settings.energy_secondary_unit }}</span>
            {% endif %}
          </div>
        </div>
        {% if section.settings.energy_caption != blank %}
          <p class="ep-energy__caption">{{ section.settings.energy_caption }}</p>
        {% endif %}
      </div>

      <div class="ep-nutrition-card">
        {% if section.settings.nutrition_heading != blank %}
          <p class="ep-nutrition-card__heading" style="--ep-nutrition-heading-size: {{ section.settings.nutrition_heading_size | default: 20 }}px">{{ section.settings.nutrition_heading }}</p>
        {% endif %}
        <ul class="ep-nutrition-card__list">
          {% for block in section.blocks %}
            {% if block.type == 'metric' %}
              <li class="ep-nutrition-card__item" style="--ep-row-label-size: {{ block.settings.metric_label_size | default: 16 }}px; --ep-row-value-size: {{ block.settings.metric_value_size | default: 16 }}px" {{ block.shopify_attributes }}>
                <span class="ep-nutrition-card__label">{{ block.settings.metric_label }}</span>
                <span class="ep-nutrition-card__value">{{ block.settings.metric_value }}</span>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="ep-bottom">
      <div class="ep-tagline">
        {% if section.settings.tagline_primary != blank %}
          <p class="ep-tagline__primary" style="--ep-tagline-primary-size: {{ section.settings.tagline_primary_size | default: 36 }}px">{{ section.settings.tagline_primary }}</p>
        {% endif %}
        {% if section.settings.tagline_secondary != blank %}
          <p class="ep-tagline__secondary" style="--ep-tagline-secondary-size: {{ section.settings.tagline_secondary_size | default: 26 }}px">{{ section.settings.tagline_secondary }}</p>
        {% endif %}
      </div>

      <div class="ep-payment-logos">
        {% for block in section.blocks %}
          {% if block.type == 'payment_logo' %}
            <div class="ep-payment-logos__item" style="--logo-size: {{ block.settings.logo_size | default: 120 }}px;" {{ block.shopify_attributes }}>
              {% if block.settings.logo_image != blank %}
                {{ block.settings.logo_image | image_url: width: 220 | image_tag: class: 'ep-payment-logos__image', alt: block.settings.logo_alt | default: block.settings.logo_label }}
              {% endif %}
              {% if block.settings.logo_label != blank %}
                <span class="ep-payment-logos__label" style="--ep-logo-label-size: {{ block.settings.logo_label_size | default: 14 }}px">{{ block.settings.logo_label }}</span>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
  #energy-payment-{{ section.id }} {
    background: var(--ep-bg);
    padding: var(--ep-padding-y) clamp(20px, 6vw, 80px);
  }

  #energy-payment-{{ section.id }} .ep-wrapper {
    width: min(1200px, 100%);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--ep-row-gap);
    position: relative;
  }

  #energy-payment-{{ section.id }} .ep-top {
    display: grid;
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
    gap: clamp(32px, 8vw, 80px);
    align-items: stretch;
  }

  #energy-payment-{{ section.id }} .ep-energy {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: clamp(18px, 4.2vw, 36px);
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-energy-icon {
    width: clamp(72px, 12vw, 120px);
    height: clamp(72px, 12vw, 120px);
    border-radius: 50%;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 22px 36px rgba(17, 36, 20, 0.14);
    transform: translateY(clamp(-16px, -2vw, -32px));
  }

  #energy-payment-{{ section.id }} .ep-energy-icon__image {
    width: clamp(40px, 6vw, 72px);
    height: auto;
    object-fit: contain;
  }

  #energy-payment-{{ section.id }} .ep-energy__label {
    font-size: clamp(24px, 4.8vw, {{ section.settings.energy_heading_size | default: 60 }}px);
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin: 0;
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-energy__metrics {
    display: flex;
    align-items: flex-end;
    gap: clamp(14px, 4.6vw, 28px);
    flex-wrap: wrap;
  }

  #energy-payment-{{ section.id }} .ep-energy__metric {
    display: inline-flex;
    align-items: flex-end;
    gap: clamp(6px, 1.6vw, 12px);
  }

  #energy-payment-{{ section.id }} .ep-energy__metric-number {
    font-size: clamp(42px, 6vw, var(--ep-value-size, 72px));
    font-weight: 700;
    letter-spacing: -0.02em;
    color: var(--ep-accent);
    line-height: 0.72;
  }

  #energy-payment-{{ section.id }} .ep-energy__metric--secondary .ep-energy__metric-number {
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-energy__metric-unit {
    font-size: clamp(18px, 3vw, var(--ep-unit-size, 32px));
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--ep-heading);
    transform: translateY(clamp(10px, 2vw, 20px));
    font-family: 'Caveat', 'Brush Script MT', 'Lucida Handwriting', cursive;
  }

  #energy-payment-{{ section.id }} .ep-energy__metric-unit--primary {
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-energy__metric-unit--secondary {
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-energy__metrics-dot {
    font-size: clamp(34px, 5vw, 66px);
    line-height: 1;
    color: var(--ep-heading);
    transform: translateY(clamp(-2px, -0.4vw, 2px));
  }

  #energy-payment-{{ section.id }} .ep-energy__caption {
    margin: 0;
    font-size: clamp(14px, 2vw, {{ section.settings.energy_caption_size | default: 18 }}px);
    color: var(--ep-subheading);
    max-width: clamp(280px, 40vw, 420px);
    line-height: 1.5;
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card {
    position: relative;
    border: 1px solid color-mix(in srgb, var(--ep-heading) 16%, transparent);
    border-radius: 12px;
    background: var(--ep-card-bg);
    padding: clamp(16px, 2.6vw, 24px);
    box-shadow: 0 20px 40px rgba(14, 32, 20, 0.07);
    display: flex;
    flex-direction: column;
    gap: clamp(16px, 3vw, 28px);
    width: fit-content;
    max-width: 100%;
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__heading {
    font-size: clamp(16px, 2.2vw, var(--ep-nutrition-heading-size, 20px));
    font-weight: 600;
    margin: 0;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--ep-subheading);
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__item {
    display: grid;
    grid-template-columns: auto 1fr;
    justify-content: space-between;
    gap: clamp(12px, 5vw, 36px);
    align-items: baseline;
    font-size: clamp(12px, 1.8vw, 18px);
    padding: clamp(10px, 1.6vw, 14px) clamp(4px, 1vw, 8px);
    border-top: 1px solid color-mix(in srgb, var(--ep-heading) 15%, transparent);
    width: fit-content;
    max-width: 100%;
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__item:first-child {
    border-top: none;
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__label {
    font-weight: 500;
    color: var(--ep-heading);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-size: clamp(11px, 1.6vw, var(--ep-row-label-size, 15px));
  }

  #energy-payment-{{ section.id }} .ep-nutrition-card__value {
    font-weight: 600;
    color: var(--ep-heading);
    letter-spacing: 0.06em;
    font-size: clamp(11px, 1.6vw, var(--ep-row-value-size, 15px));
  }

  #energy-payment-{{ section.id }} .ep-bottom {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: clamp(36px, 7vw, 64px);
  }

  #energy-payment-{{ section.id }} .ep-tagline {
    text-align: center;
    max-width: min(780px, 88%);
  }

  #energy-payment-{{ section.id }} .ep-tagline__primary {
    margin: 0;
    font-size: clamp(32px, 6vw, var(--ep-tagline-primary-size, 54px));
    font-weight: 700;
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-tagline__secondary {
    margin: clamp(8px, 1.6vw, 16px) 0 0;
    font-size: clamp(22px, 4.4vw, var(--ep-tagline-secondary-size, 42px));
    font-weight: 600;
    color: color-mix(in srgb, var(--ep-heading) 65%, var(--ep-accent) 35%);
  }

  #energy-payment-{{ section.id }} .ep-payment-logos {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(28px, 6vw, 64px);
    width: 100%;
    flex-wrap: nowrap;
    position: relative;
    perspective: 900px;
  }

  #energy-payment-{{ section.id }} .ep-payment-logos__item {
    width: var(--logo-size, 152px);
    height: var(--logo-size, 152px);
    border-radius: 50%;
    background: #ffffff;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: clamp(16px, 3vw, 22px);
    text-align: center;
    transition: transform 0.4s ease;
    transform: translateY(var(--ep-logo-offset, 0px)) translateZ(var(--ep-logo-depth, 0px));
  }

  #energy-payment-{{ section.id }} .ep-payment-logos__item:hover {
    animation: ep-logo-sway 1.1s ease-in-out infinite alternate;
  }

  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(1) { --ep-logo-offset: 36px; --ep-logo-depth: -40px; }
  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(2) { --ep-logo-offset: 18px; --ep-logo-depth: -20px; }
  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(3) { --ep-logo-offset: -12px; --ep-logo-depth: 0px; }
  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(4) { --ep-logo-offset: -12px; --ep-logo-depth: 0px; }
  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(5) { --ep-logo-offset: 18px; --ep-logo-depth: -20px; }
  #energy-payment-{{ section.id }} .ep-payment-logos__item:nth-child(6) { --ep-logo-offset: 36px; --ep-logo-depth: -40px; }

  @keyframes ep-logo-sway {
    0%   { transform: translateY(var(--ep-logo-offset, 0px)) translateX(-8px); }
    100% { transform: translateY(var(--ep-logo-offset, 0px)) translateX(8px); }
  }

  #energy-payment-{{ section.id }} .ep-payment-logos__image {
    width: clamp(40px, 6vw, 72px);
    height: auto;
    object-fit: contain;
  }

  #energy-payment-{{ section.id }} .ep-payment-logos__label {
    font-size: clamp(11px, 2.4vw, var(--ep-logo-label-size, 14px));
    font-weight: 600;
    color: var(--ep-heading);
  }

  #energy-payment-{{ section.id }} .ep-tagline__primary:empty,
  #energy-payment-{{ section.id }} .ep-tagline__secondary:empty {
    display: none;
  }

  @media (max-width: 1200px) {
    #energy-payment-{{ section.id }} .ep-wrapper {
      gap: clamp(48px, 10vw, 68px);
    }

    #energy-payment-{{ section.id }} .ep-top {
      grid-template-columns: 1fr;
    }

    #energy-payment-{{ section.id }} .ep-nutrition-card {
      max-width: 480px;
      margin: 0 auto;
    }

    #energy-payment-{{ section.id }} .ep-payment-logos {
      flex-wrap: wrap;
      gap: clamp(18px, 5vw, 42px);
    }

    #energy-payment-{{ section.id }} .ep-payment-logos__item {
      --ep-logo-offset: 0px !important;
      --ep-logo-depth: 0px !important;
    }
  }

  @media (max-width: 768px) {
    #energy-payment-{{ section.id }} {
      padding: clamp(48px, 18vw, 72px) clamp(16px, 6vw, 36px);
    }

    #energy-payment-{{ section.id }} .ep-floating-note--left {
      left: clamp(-12px, 2vw, 48px);
      top: clamp(-16px, -6vw, -36px);
    }

    #energy-payment-{{ section.id }} .ep-floating-note--right {
      right: clamp(-20px, 4vw, 60px);
      bottom: clamp(-32px, -8vw, -52px);
    }

    #energy-payment-{{ section.id }} .ep-payment-logos__item {
      width: var(--logo-size, 104px);
      height: var(--logo-size, 104px);
      --ep-logo-offset: 0px !important;
    }
  }

  @media (max-width: 520px) {
    #energy-payment-{{ section.id }} .ep-payment-logos__item {
      width: var(--logo-size, 92px);
      height: var(--logo-size, 92px);
      padding: 12px;
      --ep-logo-offset: 0px !important;
    }

    #energy-payment-{{ section.id }} .ep-energy__metric-number {
      font-size: clamp(52px, 16vw, 108px);
    }

    #energy-payment-{{ section.id }} .ep-energy__metric-unit {
      font-size: clamp(22px, 7.5vw, 40px);
      transform: translateY(clamp(10px, 3vw, 18px));
    }
  }
</style>

{% schema %}
{
  "name": "Ingrediant box",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Background color", "default": "#f6f4ea" },
    { "type": "color", "id": "accent_color", "label": "Accent color", "default": "#f3bd2f" },
    { "type": "color", "id": "heading_color", "label": "Primary text color", "default": "#191919" },
    { "type": "color", "id": "subheading_color", "label": "Secondary text color", "default": "#2e332e" },
    { "type": "color", "id": "note_color", "label": "Floating note color", "default": "#34693a" },
    { "type": "color", "id": "card_bg", "label": "Table background color (use transparency for none)", "default": "rgba(0,0,0,0)" },
    { "type": "range", "id": "section_padding_y", "label": "Section vertical padding", "min": 32, "max": 240, "step": 4, "default": 96, "unit": "px" },
    { "type": "range", "id": "row_gap", "label": "Gap between top and bottom blocks", "min": 32, "max": 160, "step": 4, "default": 72, "unit": "px" },

    { "type": "image_picker", "id": "energy_icon", "label": "Energy icon" },
    { "type": "text", "id": "energy_heading", "label": "Energy heading", "default": "ENERGY VALUE" },
    { "type": "range", "id": "energy_heading_size", "label": "Heading font size", "min": 20, "max": 120, "step": 2, "default": 72, "unit": "px" },
    { "type": "text", "id": "energy_primary_value", "label": "Primary value (e.g. 632)", "default": "632" },
    { "type": "range", "id": "energy_primary_value_size", "label": "Primary value font size", "min": 20, "max": 160, "step": 2, "default": 112, "unit": "px" },
    { "type": "text", "id": "energy_primary_unit", "label": "Primary unit (e.g. kJ)", "default": "kJ" },
    { "type": "range", "id": "energy_primary_unit_size", "label": "Primary unit font size", "min": 12, "max": 96, "step": 2, "default": 42, "unit": "px" },
    { "type": "text", "id": "energy_secondary_value", "label": "Secondary value (e.g. 151)", "default": "151" },
    { "type": "range", "id": "energy_secondary_value_size", "label": "Secondary value font size", "min": 20, "max": 160, "step": 2, "default": 112, "unit": "px" },
    { "type": "text", "id": "energy_secondary_unit", "label": "Secondary unit (e.g. KCAL)", "default": "kcal" },
    { "type": "range", "id": "energy_secondary_unit_size", "label": "Secondary unit font size", "min": 12, "max": 96, "step": 2, "default": 42, "unit": "px" },
    { "type": "textarea", "id": "energy_caption", "label": "Energy caption", "default": "With glucomannan – clinically proven to support weight loss, ideal for your conscious lifestyle." },
    { "type": "range", "id": "energy_caption_size", "label": "Caption font size", "min": 10, "max": 28, "step": 1, "default": 16, "unit": "px" },

    { "type": "text", "id": "nutrition_heading", "label": "Nutrition card heading", "default": "MACROS" },
    { "type": "range", "id": "nutrition_heading_size", "label": "Nutrition heading font size", "min": 12, "max": 40, "step": 1, "default": 18, "unit": "px" },

    { "type": "text", "id": "tagline_primary", "label": "Tagline primary", "default": "Don’t just crave it." },
    { "type": "range", "id": "tagline_primary_size", "label": "Tagline primary font size", "min": 16, "max": 80, "step": 2, "default": 54, "unit": "px" },
    { "type": "text", "id": "tagline_secondary", "label": "Tagline secondary", "default": "Get it." },
    { "type": "range", "id": "tagline_secondary_size", "label": "Tagline secondary font size", "min": 14, "max": 60, "step": 2, "default": 36, "unit": "px" },
  ],
  "blocks": [
    {
      "type": "metric",
      "name": "Nutrition metric",
      "settings": [
        { "type": "text", "id": "metric_label", "label": "Metric label", "default": "Fat" },
        { "type": "range", "id": "metric_label_size", "label": "Label font size", "min": 10, "max": 32, "step": 1, "default": 16, "unit": "px" },
        { "type": "text", "id": "metric_value", "label": "Metric value", "default": "10.2 g" },
        { "type": "range", "id": "metric_value_size", "label": "Value font size", "min": 10, "max": 32, "step": 1, "default": 16, "unit": "px" }
      ]
    },
    {
      "type": "payment_logo",
      "name": "Payment logo",
      "settings": [
        { "type": "image_picker", "id": "logo_image", "label": "Logo image" },
        { "type": "text", "id": "logo_label", "label": "Logo label" },
        { "type": "text", "id": "logo_alt", "label": "Logo alt text" },
        { "type": "range", "id": "logo_label_size", "label": "Logo label font size", "min": 10, "max": 28, "step": 1, "default": 14, "unit": "px" },
        { "type": "range", "id": "logo_size", "label": "Logo circle size", "min": 80, "max": 240, "step": 4, "default": 160, "unit": "px" }
      ]
    }
  ],
  "max_blocks": 16,
  "presets": [
    {
      "name": "Ingrediant box",
      "blocks": [
        { "type": "metric" },
        { "type": "metric" },
        { "type": "metric" },
        { "type": "payment_logo" },
        { "type": "payment_logo" },
        { "type": "payment_logo" },
        { "type": "payment_logo" }
      ]
    }
  ]
}
{% endschema %}


