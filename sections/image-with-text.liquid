{{ 'image-with-text.css' | asset_url | stylesheet_tag }}

<script src="{{ 'image-layer.js' | asset_url }}" defer="defer"></script>

{% liquid
  assign animation_effect = settings.animations
  assign animated = false
  if animation_effect != 'none'
    assign animated = true
    if section.settings.animations != 'inherit'
      assign animation_effect = section.settings.animations
    endif
  endif

  assign container = section.settings.container
  if container == 'w-full'
    assign container = 'container-full'
  endif

  assign image_animation = section.settings.image_animation

  assign heading_size = section.settings.text_size | replace: 'small', 'h3' | replace: 'medium', 'h2' | replace: 'large', 'h1'
  assign subtext_size = section.settings.text_size | replace: 'small', 'h6' | replace: 'medium', 'h6' | replace: 'large', 'h5'

  assign image_wrapper_class = 'm-image-with-text__image-wrapper' | append: ' m-image-with-text--' | append: section.settings.layout
  if section.settings.hover_effect
    assign image_wrapper_class = image_wrapper_class | append: ' m-scroll-trigger animate--' | append: animation_effect
  endif

  if section.settings.image_2 != blank
    assign image_wrapper_class = image_wrapper_class | append: ' m-image-with-text--multiple'
    if section.settings.image_overlap
      assign image_wrapper_class = image_wrapper_class | append: ' m-image-with-text--layer'
    endif
  endif

  if section.settings.show_image_reverse
    assign image_wrapper_class = image_wrapper_class | append: ' m-image-with-text--reverse'
  endif

  if image_animation == 'move-up-down'
    assign image_wrapper_class = image_wrapper_class | append: ' m-image-with-text--move-up-down'
  endif

  assign heading_animation = section.settings.heading_animation
  assign heading_animation_class = ''
  case heading_animation
    when 'fade-scale'
      assign heading_animation_class = 'm-heading-animate--fade-scale'
    when 'slide-left'
      assign heading_animation_class = 'm-heading-animate--slide-left'
    when 'drop-top'
      assign heading_animation_class = 'm-heading-animate--drop-top'
    when 'typing'
      assign heading_animation_class = 'm-heading-animate--typing'
  endcase
%}

{%- capture section_classes -%}
m-section m-image-with-text {{ section.settings.custom_class }} m-section-{{ section.id }} m-gradient m-color-{{ section.settings.color_scheme }}
{%- endcapture -%}

{%- style -%}
  .m-section-{{ section.id }} {
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --column-gap: {{ section.settings.item_gap }}px;
    --row-gap: {{ section.settings.item_gap | divided_by: 2 }}px;
    --column-gap-mobile: {{ section.settings.item_gap_mobile }}px;
    --row-gap-mobile: {{ section.settings.item_gap_mobile }}px;

    background-color: {{ section.settings.background_color }};
  }

  @keyframes fadeInScale {
    0% { opacity: 0; transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
  }
  .m-heading-animate--fade-scale {
    animation: fadeInScale 0.6s ease-out forwards;
  }

  @keyframes slideInLeft {
    0% { transform: translateX(-40px); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }
  .m-heading-animate--slide-left {
    animation: slideInLeft 0.5s ease-out forwards;
  }

  @keyframes dropInTop {
    0% { transform: translateY(-30px); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }
  .m-heading-animate--drop-top {
    animation: dropInTop 0.5s ease-out forwards;
  }

  @keyframes typing {
    from { width: 0; }
    to { width: 100%; }
  }
  @keyframes blink {
    50% { border-color: transparent; }
  }
  .m-heading-animate--typing {
    overflow: hidden;
    white-space: nowrap;
    width: 0;
    border-right: 2px solid currentColor;
    animation: typing 2s steps(30, end) forwards, blink 0.75s step-end infinite;
  }

  @media screen and (max-width: 768px) {
    .m-heading-animate--typing {
      font-size: 1.25rem;
    }
  }
{%- endstyle -%}

<!-- The rest of the file continues unchanged -->
